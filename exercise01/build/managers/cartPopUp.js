define(["../cart.js","../dom/cartPopUp.js","../dom/tblCreator.js","../tblUtils.js","../lib/lodash.js"],function(a,b,c,d,e){function f(a){return b.insertChildToParent(a,l)}function g(a){for(var b=[],d=0;d<k.length;d++){var e=k[d];switch(e){case"total":b.push(c.createCell((a.qty*a.getPrice()).toFixed(2)));break;case"price":b.push(c.createCell(a.getPrice().toFixed(2)));break;default:b.push(c.createCell(a[e]))}}return b}function h(a,c){for(;c.hasNext();)b.insertChildToParent(a,m.createRow(c.next()));return a}function i(){return e.compose(b.reset,h)(m.prepareTblWithHeaders(),a.getIterator()),!0}function j(){b.setShowCartListener(a.isEmpty,i)}var k=["id","name","price","qty","total"],l=d.createHeadersRow(k),m={createRow:e.compose(c.createRow,g),prepareTblWithHeaders:e.compose(f,c.getDetachedPlaceholder)};return j(),{reset:i}});